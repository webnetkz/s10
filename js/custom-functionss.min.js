$(function(){KMA.init(),$(window).resize(function(){KMA.modalRefresh()}),KMA.modalRefresh(),$(document).on("click","a[modal]",function(){var t=$("div#"+$(this).attr("modal"));if(t.length)return KMA.modalShow(t),!1}).on("click",".icon-close, .modal, .button-close",function(t){if(t.target!=this)return!1;KMA.modalHide($(this).closest(".modal"))}).on("keydown",function(t){27==t.keyCode&&KMA.modalHide($(".modal:visible:last"))}).on("click",".modal > *",function(t){return t.stopPropagation(),!0}),$("form").append('<input type="hidden" name="jswork" value="1" />')});var KMA=function(t,n){return t.extend(n,{init:function(){this.setTimezone(),this.initDataCountry()},modalHide:function(n){n.fadeOut("fast",function(){t(".modal:visible").length||t("body").removeClass("modal-show")})},modalRefresh:function(){if(t(".modal:visible:last").length){var n=t(".modal:visible:last .modal-block"),e=parseInt(n.width()),a=parseInt(n.height());t(window).height()>a+20?n.addClass("modal-top").removeClass("margin-t-b").css("margin-top",a/2*-1):n.addClass("margin-t-b").removeClass("modal-top"),t(window).width()>e?n.addClass("modal-left").removeClass("margin-l").css("margin-left",e/2*-1):n.addClass("margin-l").removeClass("modal-left")}},modalShow:function(n){n.fadeIn("fast"),t("body").addClass("modal-show"),this.modalRefresh()},initCallback:function(n){try{setTimeout(function(){t("#kmacb").show()},n)}catch(t){}},setTimezone:function(){var n=(new Date).getTimezoneOffset();t("form").append('<input type="hidden" name="timezone" value="'+n+'" />')},setCountryField:function(n){t("form").append("<input type='hidden' name='country' value='"+n+"' />")},checkAndSetCountryField:function(n){t("select[name=country]").length||t("input[name=country]").length||this.setCountryField(n)},disableCountrySelect:function(n){t("select[name=country]").length&&(t("select[name=country]").attr("disabled","disabled"),this.setCountryField(n))},initComebacker:function(n){try{setTimeout(function(){var n=!0;t(window).on("mouseout",function(e){e.pageY-t(window).scrollTop()<1&&n&&(n=!1,t("a[modal=kmacb-form]").trigger("click"))})},n)}catch(t){}},initVibrate:function(t){setInterval(function(){try{window.navigator&&window.navigator.vibrate?navigator.vibrate([50,30,100,30,100,30,100,30,100,30,100,30,100,30,100,30,100,30,100,30]):navigator.vibrate(0)}catch(t){}},t)},showComebackerAlert:!0,initComebackerAlert:function(t){var n=this;window.onbeforeunload=function(e){if(n.showComebackerAlert)return n.showComebackerAlert=!1,t.comebacker_text}},initDataCountry:function(){var n=this;t(".country_select").change(function(){n.changeDataCountry(t(this).val())})},changeDataCountry:function(n){t.each(t("[data-kma-country]"),function(){var e=t(this).attr("data-kma-country").split(" ").join("").toUpperCase().split(","),a=t(this).is("[data-kma-class]")?t(this).attr("data-kma-class"):void 0;e.indexOf(n)>-1?null!=a?t(this).addClass(a):t(this).show():null!=a?t(this).removeClass(a):t(this).hide()})}})}(jQuery,KMA||{});